--ADMIN
CREATE USER MDY2132_P13_1
IDENTIFIED BY "123456ABcdef"
DEFAULT TABLESPACE DATA
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON DATA;


--USUARIOS DESARROLLADORES
CREATE USER MDY2132_P13_2
IDENTIFIED BY "123456ABcdef"
DEFAULT TABLESPACE DATA
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON DATA;


CREATE USER MDY2132_P13_3
IDENTIFIED BY "123456ABcdef"
DEFAULT TABLESPACE DATA
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON DATA;

--USUARIO INFORMES
CREATE USER MDY2132_P13_4
IDENTIFIED BY "123456ABcdef"
DEFAULT TABLESPACE DATA
TEMPORARY TABLESPACE TEMP
QUOTA 100M ON DATA;

CREATE USER MDY2132_P13_5
IDENTIFIED BY "123456ABcdef"
DEFAULT TABLESPACE DATA
TEMPORARY TABLESPACE TEMP
QUOTA 100M ON DATA;

CREATE USER MDY2132_P13_6
IDENTIFIED BY "123456ABcdef"
DEFAULT TABLESPACE DATA
TEMPORARY TABLESPACE TEMP
QUOTA 100M ON DATA;

--ADMIN PRIVILEGIOS y ROLES
GRANT CREATE SESSION,  
    CREATE TABLE, 
    ALTER ANY TABLE, 
    DROP ANY TABLE, 
    CREATE SEQUENCE, 
    CREATE ANY INDEX,
    CREATE SYNONYM,
    CREATE  VIEW
TO MDY2132_P13_1;

CREATE ROLE ROL_CREAR;
GRANT CREATE PROCEDURE,
    CREATE TRIGGER,
    CREATE VIEW,
    CREATE MATERIALIZED VIEW
TO ROL_CREAR;

-- ACCESO DATOS Y OBJETOS
CREATE ROLE ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.CREDITO TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.TIPO_CONTRATO TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.REGION TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.PROVINCIA TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.COMUNA TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.PROFESION_OFICIO TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.CLIENTE TO ROLE_CRUD;
GRANT SELECT, UPDATE, INSERT, DELETE ON MDY2132_P13_1.PRODUCTO_INVERSION_CLIENTE TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.TIPO_MOVIMIENTO TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.MOVIMIENTO TO ROLE_CRUD;
GRANT SELECT, UPDATE, INSERT, DELETE ON MDY2132_P13_1.CREDITO_CLIENTE TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.FORMA_PAGO TO ROLE_CRUD;
GRANT SELECT, UPDATE, INSERT, DELETE ON MDY2132_P13_1.CUOTA_CREDITO_CLIENTE TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.SUCURSAL TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.APORTE_A_SBIF  TO ROLE_CRUD;
GRANT SELECT ON MDY2132_P13_1.PRODUCTO_INVERSION TO ROLE_CRUD;

GRANT ROLE_CRUD TO MDY2132_P13_2, MDY2132_P13_3


--ACCESO DATOS 4
GRANT SELECT ON MDY2132_P13_1.TIPO_MOVIMIENTO TO MDY2132_P13_4;
GRANT SELECT ON MDY2132_P13_1.SUCURSAL TO MDY2132_P13_4;
GRANT SELECT ON MDY2132_P13_1.TIPO_CONTRATO TO MDY2132_P13_4;
GRANT SELECT ON MDY2132_P13_1.CLIENTE TO MDY2132_P13_4;
GRANT SELECT ON MDY2132_P13_1.REGION TO MDY2132_P13_4;
GRANT SELECT ON MDY2132_P13_1.PROVINCIA TO MDY2132_P13_4;
GRANT SELECT ON MDY2132_P13_1.COMUNA TO MDY2132_P13_4;


--ROL CONSULTA 5 y 6
CREATE ROLE ROLE_CONSULTA;
GRANT SELECT ON MDY2132_P13_1.COMUNA TO ROLE_CONSULTA;
GRANT SELECT ON MDY2132_P13_1.REGION TO ROLE_CONSULTA;
GRANT SELECT ON MDY2132_P13_1.PROVINCIA TO ROLE_CONSULTA;
GRANT SELECT ON MDY2132_P13_1.CLIENTE TO ROLE_CONSULTA;
GRANT ROLE_CONSULTA TO MDY2132_P13_5, MDY2132_P13_6;


--PERFIL P13 1
CREATE PROFILE MDY2132_P13_1_PROFILE LIMIT
CONNECT_TIME UNLIMITED
FAILED_LOGIN_ATTEMPTS 10
PASSWORD_LIFE_TIME 120;

ALTER USER MDY2132_P13_1 PROFILE MDY2132_P13_1_PROFILE;

CREATE PROFILE PERFIL_2_PROFILE LIMIT
CONNECT_TIME 240
IDLE_TIME 60
FAILED_LOGIN_ATTEMPTS 5
PASSWORD_LOCK_TIME 1
PASSWORD_LIFE_TIME 90;

ALTER USER MDY2132_P13_2 PROFILE PERFIL_2_PROFILE;
ALTER USER MDY2132_P13_3 PROFILE PERFIL_2_PROFILE;

CREATE PROFILE PERFIL_3_PROFILE LIMIT
CONNECT_TIME 120
IDLE_TIME 20
FAILED_LOGIN_ATTEMPTS 2
PASSWORD_LOCK_TIME 1
PASSWORD_LIFE_TIME 90
PASSWORD_GRACE_TIME 1;


ALTER USER MDY2132_P13_4 PROFILE PERFIL_3_PROFILE;
ALTER USER MDY2132_P13_5 PROFILE PERFIL_3_PROFILE;
ALTER USER MDY2132_P13_6 PROFILE PERFIL_3_PROFILE;


--CREACION SYNONYM SINONIMOS
CREATE SYNONYM syn_c
FOR MDY2132_P13_P1.CLIENTE;

CREATE SYNONYM syn_r
FOR MDY2132_P13_P1.REGION;

CREATE SYNONYM syn_p
FOR MDY2132_P13_P1.PROVINCIA;

CREATE SYNONYM syn_co
FOR MDY2132_P13_P1.COMUNA;




